<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:DNDGame.MauiApp.ViewModels"
             xmlns:entities="clr-namespace:DNDGame.Core.Entities;assembly=DNDGame.Core"
             x:Class="DNDGame.MauiApp.Pages.SessionListPage"
             x:DataType="viewmodels:SessionListViewModel"
             Title="Sessions">
    <Grid RowDefinitions="*,Auto">
        <CollectionView Grid.Row="0" ItemsSource="{Binding Sessions}" Margin="10">
                        <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="10,5" Padding="15" BorderColor="{StaticResource Gray200}" HasShadow="True">
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="5">
                                <Label Text="{Binding Title}" FontSize="18" FontAttributes="Bold"/>
                                <Label Text="{Binding State, StringFormat='Status: {0}'}" FontSize="14" TextColor="{StaticResource Gray600}"/>
                                <Label Text="{Binding Mode, StringFormat='Mode: {0}'}" FontSize="12" TextColor="{StaticResource Gray500}"/>
                            </VerticalStackLayout>
                            <Label Grid.Column="1" Text="â†’" FontSize="24" VerticalOptions="Center"/>
                        </Grid>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:SessionListViewModel}}, Path=SelectSessionCommand}" CommandParameter="{Binding}"/>
                        </Frame.GestureRecognizers>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.EmptyView>
                <Label Text="No sessions available" HorizontalOptions="Center" VerticalOptions="Center" TextColor="{StaticResource Gray600}"/>
            </CollectionView.EmptyView>
        </CollectionView>
        <Button Grid.Row="1" Text="+ Create Session" Command="{Binding CreateSessionCommand}" Margin="20" HeightRequest="50"/>
    </Grid>
</ContentPage>
